!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=20)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){var e=this;if(this.winHeight=innerHeight,this.subscriptions=[],this.handleScroll=function(){var t=e.getPositions();e.subscriptions.forEach(function(e){return e(t)})},t.instance)return t.instance;document.addEventListener("scroll",function(){return requestAnimationFrame(e.handleScroll)},{passive:!0}),window.addEventListener("resize",function(){e.winHeight=innerHeight,requestAnimationFrame(e.handleScroll)}),t.instance=this}return t.prototype.getPositions=function(){var t=scrollY;return{winY:t,winBottom:t+this.winHeight}},t.prototype.subscribe=function(t){this.subscriptions.push(t),t(this.getPositions())},t.prototype.unsubscribe=function(t){this.subscriptions.splice(this.subscriptions.indexOf(t),1)},t.prototype.getTopCoord=function(t){return t.getBoundingClientRect().top+pageYOffset},t}();e.scrollHelper=new n,e.getCollection=function(t,e){return void 0===e&&(e=document),Array.from(e.querySelectorAll(t))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=function(){function t(t){void 0===t&&(t=".lazy,[data-bg]");var e=this;this.winHeight=innerHeight,this.items=[],this.itemsInProgress=[],this.handleScroll=function(t){for(var i=e.items.length-1;i>=0;i--)e.loadItem(e.items[i],t);e.items.length||n.scrollHelper.unsubscribe(e.handleScroll)},n.getCollection(t).forEach(function(t){e.items.push({el:t,src:t.dataset.src,bg:t.dataset.bg})}),this.init()}return t.prototype.init=function(){n.scrollHelper.subscribe(this.handleScroll)},t.prototype.loadItem=function(t,e){var i=t.el,o=n.scrollHelper.getTopCoord(i);e.winBottom+800>o&&e.winY-800<o+t.el.offsetHeight&&(this.items.splice(this.items.indexOf(t),1),this.itemsInProgress.push(t),this.downloadImg(t))},t.prototype.downloadImg=function(t){var e=new Image;e.onload=function(){t.src?t.el.src=t.src:t.bg&&(t.el.style.backgroundImage='url("'+t.bg+'")'),t.el.classList.add("active")},e.src=t.src||t.bg},t}();e.LazyLoading=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=function(){function t(t){var e=this;this.positionsMap=[],this.winHeight=innerHeight,this.positionVarName="--position",this.handleScroll=function(t){e.positionsMap.forEach(function(i){return e.parallaxItem(i,t)})},this.prlxElems=n.getCollection(t||".prlx"),this.prlxElems.forEach(function(t){t.style.transform="translateY(var("+e.positionVarName+")) translateZ(0)",e.positionsMap.push({el:t,speed:+t.dataset.speed||1})}),this.init()}return t.prototype.init=function(){n.scrollHelper.subscribe(this.handleScroll)},t.prototype.parallaxItem=function(t,e){var i=t.el,o=t.speed,r=n.scrollHelper.getTopCoord(i),s=i.offsetHeight;if(e.winBottom>r&&e.winY<r+s){var l=(e.winBottom-r)*o/(this.winHeight+s)*100+(50-50*o);i.style.setProperty(this.positionVarName,l.toFixed(2)+"%")}},t}();e.Parallax=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(0),r='<svg xmlns="http://www.w3.org/2000/svg" width="39" height="39">\n  <circle cx="19.5" cy="19.5" r="19" fill="none" stroke="currentColor"/>\n  <path fill="currentColor" stroke="currentColor" d="M23 25.42l-1.185 1.19-7.106-7.11 7.106-7.11L23 13.58l-5.923 5.92z"/>\n</svg>',s='<button class="slider__button slider__button--left">'+r+"</button>",l='<button class="slider__button slider__button--right">'+r+"</button>";function c(t){return(new DOMParser).parseFromString(t,"text/html").body.childNodes[0]}!function(t){t.active="active",t.remove="remove",t.slider="slider",t.sliderContent="slider__content",t.sliderSlide="slider__slide",t.sliderButton="slider__button"}(n||(n={}));var a=function(){function t(t){var e=this;this.animationTime=400,this.buttonPrev=c(s),this.buttonNext=c(l),this.handleScroll=function(t){var i=e.container,n=o.scrollHelper.getTopCoord(i),r=i.offsetHeight;t.winBottom>n&&t.winY<n+r?e.timer||e.restartTimer():e.timer&&e.stopTimer()},this.next=function(){var t=e.activeSlide.nextElementSibling||e.slides[0];e.changeActiveSlide(t)},this.prev=function(){var t=e.activeSlide.previousElementSibling||e.slides[e.slides.length-1];e.changeActiveSlide(t)},this.stopTimer=function(){e.timer&&clearInterval(e.timer),e.timer=null},this.restartTimer=function(){e.stopTimer(),e.timer=setInterval(e.next,4e3)},this.container=document.querySelector(t),this.container.classList.add(n.slider),this.slides=this.container.firstElementChild.children,this.initActiveSlide(),this.init()}return t.prototype.init=function(){this.container.firstElementChild.classList.add(n.sliderContent),Array.from(this.slides).forEach(function(t){return t.classList.add(n.sliderSlide)}),o.getCollection("."+n.sliderButton,this.container).forEach(function(t){return t.remove()}),this.container.appendChild(this.buttonNext),this.container.insertBefore(this.buttonPrev,this.container.firstElementChild),this.container.style.setProperty("--animation-time",this.animationTime+"ms"),this.subscribe()},t.prototype.initActiveSlide=function(){this.activeSlide=this.container.querySelector("."+n.active)||this.slides[0],this.activeSlide.classList.add(n.active)},t.prototype.subscribe=function(){var t=this;this.buttonPrev.addEventListener("click",this.prev),this.buttonNext.addEventListener("click",this.next),this.container.addEventListener("mouseover",function(){return t.stopTimer()}),this.container.addEventListener("mouseout",function(){return t.restartTimer()}),o.scrollHelper.subscribe(this.handleScroll)},t.prototype.destroy=function(){this.buttonPrev.removeEventListener("click",this.prev),this.buttonNext.removeEventListener("click",this.next),this.container.removeEventListener("mouseover",this.stopTimer),this.container.removeEventListener("mouseout",this.restartTimer)},t.prototype.changeActiveSlide=function(t){var e=this;this.activeSlide.classList.add(n.remove),setTimeout(function(){e.activeSlide.classList.remove(n.remove,n.active),e.activeSlide=t,e.activeSlide.classList.add(n.active)},this.animationTime),this.restartTimer()},t}();e.Slider=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=function(){function t(t){void 0===t&&(t="modal");var e=this;this.element=document.getElementById("modal"),this.element.querySelector(".modal__close").addEventListener("click",function(){return e.hide()}),this.element.querySelector(".modal__subscribe").addEventListener("click",function(){return e.subscribe()}),n.getCollection("[show-modal]").forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),e.show()})})}return t.prototype.subscribe=function(){this.hide()},t.prototype.show=function(){this.element.classList.add("active")},t.prototype.hide=function(){this.element.classList.remove("active")},t}();e.Modal=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=function(){function t(t){void 0===t&&(t=".animated");var e=this;this.items=[],this.handleScroll=function(t){for(var i=e.items.length-1;i>=0;i--)e.showItem(e.items[i],t);e.items.length||n.scrollHelper.unsubscribe(e.handleScroll)},n.getCollection(t).forEach(function(t){e.items.push({el:t,delay:+t.dataset.delay||0})}),this.init()}return t.prototype.init=function(){n.scrollHelper.subscribe(this.handleScroll)},t.prototype.showItem=function(t,e){var i=t.el,o=n.scrollHelper.getTopCoord(i),r=i.offsetHeight;e.winBottom>o&&e.winY<o+r&&(setTimeout(function(){i.classList.add("show")},t.delay),this.items.splice(this.items.indexOf(t),1))},t}();e.LazyShowing=o},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(19),i(18),i(17),i(16),i(15),i(14),i(13),i(12),i(11),i(10),i(9),i(8),i(7),i(6);var n=i(5),o=i(4),r=i(3),s=i(2),l=i(1);new r.Slider(".b1-slider"),new r.Slider(".b3-slider"),new r.Slider(".b4-slider");new l.LazyLoading,new s.Parallax,new o.Modal,new n.LazyShowing}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9oZWxwZXJzLnRzIiwid2VicGFjazovLy8uL3NjcmlwdHMvbGF6eS1sb2FkaW5nLnRzIiwid2VicGFjazovLy8uL3NjcmlwdHMvcGFyYWxsYXgudHMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9zbGlkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9tb2RhbC50cyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2xhenktc2hvd2luZy50cyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJTY3JvbGxIZWxwZXIiLCJfdGhpcyIsInRoaXMiLCJ3aW5IZWlnaHQiLCJpbm5lckhlaWdodCIsInN1YnNjcmlwdGlvbnMiLCJoYW5kbGVTY3JvbGwiLCJ3aW5Qb3MiLCJnZXRQb3NpdGlvbnMiLCJmb3JFYWNoIiwiY2IiLCJpbnN0YW5jZSIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInBhc3NpdmUiLCJ3aW5kb3ciLCJ3aW5ZIiwic2Nyb2xsWSIsIndpbkJvdHRvbSIsInN1YnNjcmliZSIsInB1c2giLCJ1bnN1YnNjcmliZSIsInNwbGljZSIsImluZGV4T2YiLCJnZXRUb3BDb29yZCIsImVsZW0iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJwYWdlWU9mZnNldCIsInNjcm9sbEhlbHBlciIsImdldENvbGxlY3Rpb24iLCJzZWxlY3RvciIsImNvbnRhaW5lciIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJoZWxwZXJzXzEiLCJMYXp5TG9hZGluZyIsIml0ZW1zIiwiaXRlbXNJblByb2dyZXNzIiwibGVuZ3RoIiwibG9hZEl0ZW0iLCJlbCIsInNyYyIsImRhdGFzZXQiLCJiZyIsImluaXQiLCJpdGVtIiwiaW1nWSIsIm9mZnNldEhlaWdodCIsImRvd25sb2FkSW1nIiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImNsYXNzTGlzdCIsImFkZCIsIlBhcmFsbGF4IiwicG9zaXRpb25zTWFwIiwicG9zaXRpb25WYXJOYW1lIiwicGFyYWxsYXhJdGVtIiwicHJseEVsZW1zIiwidHJhbnNmb3JtIiwic3BlZWQiLCJpbWdIIiwicG9zaXRpb24iLCJzZXRQcm9wZXJ0eSIsInRvRml4ZWQiLCJzZWxlY3RvcnMiLCJhcnJvd0ljb24iLCJsZWZ0QXJyb3ciLCJyaWdodEFycm93IiwicGFyc2VEb20iLCJzdHJpbmciLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJib2R5IiwiY2hpbGROb2RlcyIsIlNsaWRlciIsImFuaW1hdGlvblRpbWUiLCJidXR0b25QcmV2IiwiYnV0dG9uTmV4dCIsInRpbWVyIiwicmVzdGFydFRpbWVyIiwic3RvcFRpbWVyIiwibmV4dCIsIm5leHRFbGVtZW50IiwiYWN0aXZlU2xpZGUiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJzbGlkZXMiLCJjaGFuZ2VBY3RpdmVTbGlkZSIsInByZXYiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwicXVlcnlTZWxlY3RvciIsInNsaWRlciIsImZpcnN0RWxlbWVudENoaWxkIiwiY2hpbGRyZW4iLCJpbml0QWN0aXZlU2xpZGUiLCJzbGlkZXJDb250ZW50Iiwic2xpZGVyU2xpZGUiLCJzbGlkZXJCdXR0b24iLCJyZW1vdmUiLCJhcHBlbmRDaGlsZCIsImluc2VydEJlZm9yZSIsImFjdGl2ZSIsImRlc3Ryb3kiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0VGltZW91dCIsIk1vZGFsIiwiZWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwiaGlkZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzaG93IiwiTGF6eVNob3dpbmciLCJzaG93SXRlbSIsImRlbGF5IiwibGF6eV9zaG93aW5nXzEiLCJtb2RhbF8xIiwic2xpZGVyXzEiLCJwYXJhbGxheF8xIiwibGF6eV9sb2FkaW5nXzEiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWpCLEdBQ0FZLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURrQixPQUFBLEtBSWpEcEIsRUFBQXFCLEVBQUEsU0FBQWxCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQW1CLFdBQ0EsV0FBMkIsT0FBQW5CLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFVLEVB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R1ozQyxFQUFPWSxVQUFZOEIsR0FBUTFDLEVBQU9VLEtBQU9nQyxFQUFPaUIsSUFDbEQ2QyxXQUFXLFdBQ1RwRSxFQUFHYyxVQUFVQyxJQUFJLFNBQ2hCVixFQUFLeUUsT0FDUnZILEtBQUtxQyxNQUFNaEIsT0FBT3JCLEtBQUtxQyxNQUFNZixRQUFRd0IsR0FBTyxLQUdsRHVFLEVBbENBLEdBQWFsSixFQUFBa0osNlRDRmJwSixFQUFBLElBQ0FBLEVBQUEsSUFDQUEsRUFBQSxJQUNBQSxFQUFBLElBQ0FBLEVBQUEsSUFDQUEsRUFBQSxJQUNBQSxFQUFBLElBQ0FBLEVBQUEsSUFDQUEsRUFBQSxJQUNBQSxFQUFBLElBQ0FBLEVBQUEsR0FDQUEsRUFBQSxHQUNBQSxFQUFBLEdBQ0FBLEVBQUEsR0FDQSxJQUFBdUosRUFBQXZKLEVBQUEsR0FDQXdKLEVBQUF4SixFQUFBLEdBRUF5SixFQUFBekosRUFBQSxHQUNBMEosRUFBQTFKLEVBQUEsR0FDQTJKLEVBQUEzSixFQUFBLEdBR2dCLElBQUl5SixFQUFBNUMsT0FBTyxjQUNYLElBQUk0QyxFQUFBNUMsT0FBTyxjQUNYLElBQUk0QyxFQUFBNUMsT0FBTyxjQUUzQixJQUFJOEMsRUFBQXhGLFlBQ0osSUFBSXVGLEVBQUFsRSxTQUNKLElBQUlnRSxFQUFBWCxNQUNKLElBQUlVLEVBQUFIIiwiZmlsZSI6ImJ1bmRsZS5bY29udGVudGhhc2hdLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyMCk7XG4iLCJleHBvcnQgaW50ZXJmYWNlIFdpblBvc2l0aW9ucyB7XG4gIHdpblk6IG51bWJlcixcbiAgd2luQm90dG9tOiBudW1iZXJcbn1cblxuY2xhc3MgU2Nyb2xsSGVscGVyIHtcbiAgc3RhdGljIGluc3RhbmNlO1xuICB3aW5IZWlnaHQgPSBpbm5lckhlaWdodDtcbiAgc3Vic2NyaXB0aW9ucyA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGlmIChTY3JvbGxIZWxwZXIuaW5zdGFuY2UpIHJldHVybiBTY3JvbGxIZWxwZXIuaW5zdGFuY2U7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5oYW5kbGVTY3JvbGwpLCB7cGFzc2l2ZTogdHJ1ZX0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICB0aGlzLndpbkhlaWdodCA9IGlubmVySGVpZ2h0O1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuaGFuZGxlU2Nyb2xsKTtcbiAgICB9KTtcblxuICAgIFNjcm9sbEhlbHBlci5pbnN0YW5jZSA9IHRoaXM7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVNjcm9sbCA9ICgpID0+IHtcbiAgICBjb25zdCB3aW5Qb3MgPSB0aGlzLmdldFBvc2l0aW9ucygpO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKGNiID0+IGNiKHdpblBvcykpO1xuICB9O1xuXG4gIHByaXZhdGUgZ2V0UG9zaXRpb25zKCk6IFdpblBvc2l0aW9ucyB7XG4gICAgY29uc3Qgd2luWSA9IHNjcm9sbFk7XG4gICAgY29uc3Qgd2luQm90dG9tID0gd2luWSArIHRoaXMud2luSGVpZ2h0O1xuICAgIHJldHVybiB7d2luWSwgd2luQm90dG9tfTtcbiAgfVxuXG4gIHN1YnNjcmliZShjYikge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKGNiKTtcbiAgICBjYih0aGlzLmdldFBvc2l0aW9ucygpKTtcbiAgfVxuXG4gIHVuc3Vic2NyaWJlKGNiKSB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnNwbGljZSh0aGlzLnN1YnNjcmlwdGlvbnMuaW5kZXhPZihjYiksIDEpO1xuICB9XG5cbiAgZ2V0VG9wQ29vcmQoZWxlbTogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuICAgIHJldHVybiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHBhZ2VZT2Zmc2V0O1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzY3JvbGxIZWxwZXIgPSBuZXcgU2Nyb2xsSGVscGVyKCk7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbGxlY3Rpb24oc2VsZWN0b3IsIGNvbnRhaW5lcjogYW55ID0gZG9jdW1lbnQpOiBFbGVtZW50W10ge1xuICByZXR1cm4gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xufVxuIiwiaW1wb3J0IHtnZXRDb2xsZWN0aW9uLCBzY3JvbGxIZWxwZXIsIFdpblBvc2l0aW9uc30gZnJvbSBcIi4vaGVscGVyc1wiO1xuXG5pbnRlcmZhY2UgaW1nSXRlbSB7XG4gIGVsOiBIVE1MSW1hZ2VFbGVtZW50XG4gIHNyYzogc3RyaW5nLFxuICBiZzogc3RyaW5nXG59XG5cbmV4cG9ydCBjbGFzcyBMYXp5TG9hZGluZyB7XG4gIHdpbkhlaWdodCA9IGlubmVySGVpZ2h0O1xuICBpdGVtczogaW1nSXRlbVtdID0gW107XG4gIGl0ZW1zSW5Qcm9ncmVzczogaW1nSXRlbVtdID0gW107XG5cbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IgPSAnLmxhenksW2RhdGEtYmddJykge1xuICAgIGdldENvbGxlY3Rpb24oc2VsZWN0b3IpLmZvckVhY2goKGVsOiBIVE1MSW1hZ2VFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLml0ZW1zLnB1c2goe2VsLCBzcmM6IGVsLmRhdGFzZXQuc3JjLCBiZzogZWwuZGF0YXNldC5iZ30pO1xuICAgIH0pO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICBzY3JvbGxIZWxwZXIuc3Vic2NyaWJlKHRoaXMuaGFuZGxlU2Nyb2xsKTtcbiAgfVxuXG4gIGhhbmRsZVNjcm9sbCA9ICh3aW5Qb3M6IFdpblBvc2l0aW9ucykgPT4ge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aGlzLmxvYWRJdGVtKHRoaXMuaXRlbXNbaV0sIHdpblBvcylcbiAgICB9XG4gICAgaWYgKCF0aGlzLml0ZW1zLmxlbmd0aCkgc2Nyb2xsSGVscGVyLnVuc3Vic2NyaWJlKHRoaXMuaGFuZGxlU2Nyb2xsKTtcbiAgfTtcblxuICBsb2FkSXRlbShpdGVtOiBpbWdJdGVtLCB3aW5Qb3M6IFdpblBvc2l0aW9ucykge1xuICAgIGNvbnN0IGVsID0gaXRlbS5lbDtcbiAgICBjb25zdCBpbWdZID0gc2Nyb2xsSGVscGVyLmdldFRvcENvb3JkKGVsKTtcbiAgICBjb25zdCBvZmZzZXQgPSA4MDA7XG5cbiAgICAvLyBJZiBibG9jayBpcyBzaG93biBvbiBzY3JlZW5cbiAgICBpZiAod2luUG9zLndpbkJvdHRvbSArIG9mZnNldCA+IGltZ1kgJiYgd2luUG9zLndpblkgLSBvZmZzZXQgPCBpbWdZICsgaXRlbS5lbC5vZmZzZXRIZWlnaHQpIHtcbiAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKHRoaXMuaXRlbXMuaW5kZXhPZihpdGVtKSwgMSk7XG4gICAgICB0aGlzLml0ZW1zSW5Qcm9ncmVzcy5wdXNoKGl0ZW0pO1xuICAgICAgdGhpcy5kb3dubG9hZEltZyhpdGVtKTtcbiAgICB9XG4gIH1cblxuICBkb3dubG9hZEltZyhpdGVtOiBpbWdJdGVtKSB7XG4gICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGlmIChpdGVtLnNyYykge1xuICAgICAgICBpdGVtLmVsLnNyYyA9IGl0ZW0uc3JjO1xuICAgICAgfSBlbHNlIGlmIChpdGVtLmJnKSB7XG4gICAgICAgIGl0ZW0uZWwuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybChcIiR7aXRlbS5iZ31cIilgO1xuICAgICAgfVxuICAgICAgaXRlbS5lbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9O1xuICAgIGltZy5zcmMgPSBpdGVtLnNyYyB8fCBpdGVtLmJnO1xuICB9XG59XG4iLCJpbXBvcnQge2dldENvbGxlY3Rpb24sIHNjcm9sbEhlbHBlciwgV2luUG9zaXRpb25zfSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5cbmludGVyZmFjZSBQb3NpdGlvbnNNYXBJdGVtIHtcbiAgZWw6IEhUTUxFbGVtZW50O1xuICBzcGVlZDogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgUGFyYWxsYXgge1xuICBwcmx4RWxlbXM6IEFycmF5PEVsZW1lbnQ+O1xuICBwb3NpdGlvbnNNYXA6IFBvc2l0aW9uc01hcEl0ZW1bXSA9IFtdO1xuICB3aW5IZWlnaHQgPSBpbm5lckhlaWdodDtcbiAgcHJpdmF0ZSBwb3NpdGlvblZhck5hbWUgPSAnLS1wb3NpdGlvbic7XG5cbiAgY29uc3RydWN0b3Ioc2VsZWN0b3I/OiBzdHJpbmcpIHtcbiAgICB0aGlzLnBybHhFbGVtcyA9IGdldENvbGxlY3Rpb24oc2VsZWN0b3IgfHwgJy5wcmx4Jyk7XG4gICAgdGhpcy5wcmx4RWxlbXMuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICBlbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWSh2YXIoJHt0aGlzLnBvc2l0aW9uVmFyTmFtZX0pKSB0cmFuc2xhdGVaKDApYDtcbiAgICAgIHRoaXMucG9zaXRpb25zTWFwLnB1c2goe2VsLCBzcGVlZDogK2VsLmRhdGFzZXQuc3BlZWQgfHwgMX0pXG4gICAgfSk7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBpbml0KCkge1xuICAgIHNjcm9sbEhlbHBlci5zdWJzY3JpYmUodGhpcy5oYW5kbGVTY3JvbGwpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVTY3JvbGwgPSAod2luUG9zOiBXaW5Qb3NpdGlvbnMpID0+IHtcbiAgICB0aGlzLnBvc2l0aW9uc01hcC5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5wYXJhbGxheEl0ZW0oaXRlbSwgd2luUG9zKSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBwYXJhbGxheEl0ZW0oaXRlbTogUG9zaXRpb25zTWFwSXRlbSwgd2luUG9zOiBXaW5Qb3NpdGlvbnMpIHtcbiAgICBjb25zdCBlbCA9IGl0ZW0uZWw7XG4gICAgY29uc3Qgc3BlZWQgPSBpdGVtLnNwZWVkO1xuICAgIGNvbnN0IGltZ1kgPSBzY3JvbGxIZWxwZXIuZ2V0VG9wQ29vcmQoZWwpO1xuICAgIGNvbnN0IGltZ0ggPSBlbC5vZmZzZXRIZWlnaHQ7XG5cbiAgICAvLyBJZiBibG9jayBpcyBzaG93biBvbiBzY3JlZW5cbiAgICBpZiAod2luUG9zLndpbkJvdHRvbSA+IGltZ1kgJiYgd2luUG9zLndpblkgPCBpbWdZICsgaW1nSCkge1xuICAgICAgY29uc3QgaW1nQm90dG9tID0gKCh3aW5Qb3Mud2luQm90dG9tIC0gaW1nWSkgKiBzcGVlZCk7IC8vIE51bWJlciBvZiBwaXhlbHMgc2hvd24gYWZ0ZXIgYmxvY2sgYXBwZWFyXG4gICAgICBjb25zdCBpbWdUb3AgPSB0aGlzLndpbkhlaWdodCArIGltZ0g7IC8vIE1heCBudW1iZXIgb2YgcGl4ZWxzIHVudGlsIGJsb2NrIGRpc2FwcGVhclxuICAgICAgY29uc3QgcG9zaXRpb24gPSAoKGltZ0JvdHRvbSAvIGltZ1RvcCkgKiAxMDApICsgKDUwIC0gKHNwZWVkICogNTApKTsgLy8gUGVyY2VudGFnZSBiZXR3ZWVuIHN0YXJ0IHNob3dpbmcgdW50aWwgZGlzYXBwZWFyaW5nXG5cbiAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KHRoaXMucG9zaXRpb25WYXJOYW1lLCBgJHtwb3NpdGlvbi50b0ZpeGVkKDIpfSVgKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7Z2V0Q29sbGVjdGlvbiwgc2Nyb2xsSGVscGVyLCBXaW5Qb3NpdGlvbnN9IGZyb20gXCIuL2hlbHBlcnNcIjtcblxuY29uc3QgYXJyb3dJY29uID0gYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMzlcIiBoZWlnaHQ9XCIzOVwiPlxuICA8Y2lyY2xlIGN4PVwiMTkuNVwiIGN5PVwiMTkuNVwiIHI9XCIxOVwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIvPlxuICA8cGF0aCBmaWxsPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZD1cIk0yMyAyNS40MmwtMS4xODUgMS4xOS03LjEwNi03LjExIDcuMTA2LTcuMTFMMjMgMTMuNThsLTUuOTIzIDUuOTJ6XCIvPlxuPC9zdmc+YDtcblxuY29uc3QgbGVmdEFycm93ID0gYDxidXR0b24gY2xhc3M9XCJzbGlkZXJfX2J1dHRvbiBzbGlkZXJfX2J1dHRvbi0tbGVmdFwiPiR7YXJyb3dJY29ufTwvYnV0dG9uPmA7XG5jb25zdCByaWdodEFycm93ID0gYDxidXR0b24gY2xhc3M9XCJzbGlkZXJfX2J1dHRvbiBzbGlkZXJfX2J1dHRvbi0tcmlnaHRcIj4ke2Fycm93SWNvbn08L2J1dHRvbj5gO1xuXG5mdW5jdGlvbiBwYXJzZURvbShzdHJpbmc6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgY29uc3QgZG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhzdHJpbmcsIFwidGV4dC9odG1sXCIpO1xuICByZXR1cm4gZG9jLmJvZHkuY2hpbGROb2Rlc1swXSBhcyBIVE1MRWxlbWVudDtcbn1cblxuZW51bSBzZWxlY3RvcnMge1xuICBhY3RpdmUgPSAnYWN0aXZlJyxcbiAgcmVtb3ZlID0gJ3JlbW92ZScsXG4gIHNsaWRlciA9ICdzbGlkZXInLFxuICBzbGlkZXJDb250ZW50ID0gJ3NsaWRlcl9fY29udGVudCcsXG4gIHNsaWRlclNsaWRlID0gJ3NsaWRlcl9fc2xpZGUnLFxuICBzbGlkZXJCdXR0b24gPSAnc2xpZGVyX19idXR0b24nXG59XG5cbmV4cG9ydCBjbGFzcyBTbGlkZXIge1xuICBhbmltYXRpb25UaW1lID0gNDAwO1xuICBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuICBzbGlkZXM6IEhUTUxDb2xsZWN0aW9uO1xuICBidXR0b25QcmV2ID0gcGFyc2VEb20obGVmdEFycm93KSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgYnV0dG9uTmV4dCA9IHBhcnNlRG9tKHJpZ2h0QXJyb3cpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICBhY3RpdmVTbGlkZTogRWxlbWVudDtcbiAgdGltZXI6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChzZWxlY3RvcnMuc2xpZGVyKTtcbiAgICB0aGlzLnNsaWRlcyA9IHRoaXMuY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkLmNoaWxkcmVuO1xuXG4gICAgdGhpcy5pbml0QWN0aXZlU2xpZGUoKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdCgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuYWRkKHNlbGVjdG9ycy5zbGlkZXJDb250ZW50KTtcbiAgICBBcnJheS5mcm9tKHRoaXMuc2xpZGVzKS5mb3JFYWNoKGVsZW0gPT4gZWxlbS5jbGFzc0xpc3QuYWRkKHNlbGVjdG9ycy5zbGlkZXJTbGlkZSkpO1xuXG4gICAgZ2V0Q29sbGVjdGlvbihgLiR7c2VsZWN0b3JzLnNsaWRlckJ1dHRvbn1gLCB0aGlzLmNvbnRhaW5lcikuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7XG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5idXR0b25OZXh0KTtcbiAgICB0aGlzLmNvbnRhaW5lci5pbnNlcnRCZWZvcmUodGhpcy5idXR0b25QcmV2LCB0aGlzLmNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZCk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1hbmltYXRpb24tdGltZScsIGAke3RoaXMuYW5pbWF0aW9uVGltZX1tc2ApO1xuXG4gICAgLy8gdGhpcy5yZXN0YXJ0VGltZXIoKTtcbiAgICB0aGlzLnN1YnNjcmliZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0QWN0aXZlU2xpZGUoKSB7XG4gICAgdGhpcy5hY3RpdmVTbGlkZSA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYC4ke3NlbGVjdG9ycy5hY3RpdmV9YCkgfHwgdGhpcy5zbGlkZXNbMF07XG4gICAgdGhpcy5hY3RpdmVTbGlkZS5jbGFzc0xpc3QuYWRkKHNlbGVjdG9ycy5hY3RpdmUpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWJzY3JpYmUoKSB7XG4gICAgdGhpcy5idXR0b25QcmV2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5wcmV2KTtcbiAgICB0aGlzLmJ1dHRvbk5leHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm5leHQpO1xuICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsICgpID0+IHRoaXMuc3RvcFRpbWVyKCkpO1xuICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgKCkgPT4gdGhpcy5yZXN0YXJ0VGltZXIoKSk7XG4gICAgc2Nyb2xsSGVscGVyLnN1YnNjcmliZSh0aGlzLmhhbmRsZVNjcm9sbCk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuYnV0dG9uUHJldi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucHJldik7XG4gICAgdGhpcy5idXR0b25OZXh0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5uZXh0KTtcbiAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLnN0b3BUaW1lcik7XG4gICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCB0aGlzLnJlc3RhcnRUaW1lcik7XG4gIH1cblxuICBoYW5kbGVTY3JvbGwgPSAod2luUG9zOiBXaW5Qb3NpdGlvbnMpID0+IHtcbiAgICBjb25zdCBlbCA9IHRoaXMuY29udGFpbmVyO1xuICAgIGNvbnN0IGltZ1kgPSBzY3JvbGxIZWxwZXIuZ2V0VG9wQ29vcmQoZWwpO1xuICAgIGNvbnN0IGltZ0ggPSBlbC5vZmZzZXRIZWlnaHQ7XG5cbiAgICAvLyBJZiBibG9jayBpcyBzaG93biBvbiBzY3JlZW5cbiAgICBpZiAod2luUG9zLndpbkJvdHRvbSA+IGltZ1kgJiYgd2luUG9zLndpblkgPCBpbWdZICsgaW1nSCkge1xuICAgICAgaWYgKCF0aGlzLnRpbWVyKSB7XG4gICAgICAgIHRoaXMucmVzdGFydFRpbWVyKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKHRoaXMudGltZXIpIHtcbiAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XG4gICAgfVxuICB9O1xuXG4gIG5leHQgPSAoKSA9PiB7XG4gICAgY29uc3QgbmV4dEVsZW1lbnQgPSB0aGlzLmFjdGl2ZVNsaWRlLm5leHRFbGVtZW50U2libGluZyB8fCB0aGlzLnNsaWRlc1swXTtcbiAgICB0aGlzLmNoYW5nZUFjdGl2ZVNsaWRlKG5leHRFbGVtZW50KTtcbiAgfTtcblxuICBwcmV2ID0gKCkgPT4ge1xuICAgIGNvbnN0IG5leHRFbGVtZW50ID0gdGhpcy5hY3RpdmVTbGlkZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIHx8IHRoaXMuc2xpZGVzW3RoaXMuc2xpZGVzLmxlbmd0aCAtIDFdO1xuICAgIHRoaXMuY2hhbmdlQWN0aXZlU2xpZGUobmV4dEVsZW1lbnQpO1xuICB9O1xuXG4gIHByaXZhdGUgY2hhbmdlQWN0aXZlU2xpZGUobmV4dEVsZW1lbnQ6IEVsZW1lbnQpIHtcbiAgICB0aGlzLmFjdGl2ZVNsaWRlLmNsYXNzTGlzdC5hZGQoc2VsZWN0b3JzLnJlbW92ZSk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZlU2xpZGUuY2xhc3NMaXN0LnJlbW92ZShzZWxlY3RvcnMucmVtb3ZlLCBzZWxlY3RvcnMuYWN0aXZlKTtcbiAgICAgIHRoaXMuYWN0aXZlU2xpZGUgPSBuZXh0RWxlbWVudDtcbiAgICAgIHRoaXMuYWN0aXZlU2xpZGUuY2xhc3NMaXN0LmFkZChzZWxlY3RvcnMuYWN0aXZlKTtcbiAgICB9LCB0aGlzLmFuaW1hdGlvblRpbWUpO1xuXG4gICAgdGhpcy5yZXN0YXJ0VGltZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RvcFRpbWVyID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLnRpbWVyKSBjbGVhckludGVydmFsKHRoaXMudGltZXIpO1xuICAgIHRoaXMudGltZXIgPSBudWxsO1xuICB9O1xuXG4gIHByaXZhdGUgcmVzdGFydFRpbWVyID0gKCkgPT4ge1xuICAgIHRoaXMuc3RvcFRpbWVyKCk7XG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKHRoaXMubmV4dCwgNDAwMCk7XG4gIH1cbn1cbiIsImltcG9ydCB7Z2V0Q29sbGVjdGlvbn0gZnJvbSBcIi4vaGVscGVyc1wiO1xuXG5leHBvcnQgY2xhc3MgTW9kYWwge1xuICBlbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihzZWxlY3RvciA9ICdtb2RhbCcpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwnKTtcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5oaWRlKCkpO1xuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3N1YnNjcmliZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zdWJzY3JpYmUoKSk7XG5cbiAgICBnZXRDb2xsZWN0aW9uKCdbc2hvdy1tb2RhbF0nKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cblxuICBzdWJzY3JpYmUoKSB7XG5cbiAgICB0aGlzLmhpZGUoKTtcbiAgfVxuXG4gIHNob3coKSB7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICB9XG5cbiAgaGlkZSgpIHtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gIH1cbn1cbiIsImltcG9ydCB7Z2V0Q29sbGVjdGlvbiwgc2Nyb2xsSGVscGVyLCBXaW5Qb3NpdGlvbnN9IGZyb20gXCIuL2hlbHBlcnNcIjtcblxuZXhwb3J0IGNsYXNzIExhenlTaG93aW5nIHtcbiAgaXRlbXMgPSBbXTtcblxuICBjb25zdHJ1Y3RvcihzZWxlY3RvciA9ICcuYW5pbWF0ZWQnKSB7XG4gICAgZ2V0Q29sbGVjdGlvbihzZWxlY3RvcikuZm9yRWFjaCgoZWw6IEhUTUxJbWFnZUVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuaXRlbXMucHVzaCh7ZWwsIGRlbGF5OiArZWwuZGF0YXNldC5kZWxheSB8fCAwfSk7XG4gICAgfSk7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBwcml2YXRlIGluaXQoKSB7XG4gICAgc2Nyb2xsSGVscGVyLnN1YnNjcmliZSh0aGlzLmhhbmRsZVNjcm9sbCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVNjcm9sbCA9ICh3aW5Qb3M6IFdpblBvc2l0aW9ucykgPT4ge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aGlzLnNob3dJdGVtKHRoaXMuaXRlbXNbaV0sIHdpblBvcylcbiAgICB9XG4gICAgaWYgKCF0aGlzLml0ZW1zLmxlbmd0aCkgc2Nyb2xsSGVscGVyLnVuc3Vic2NyaWJlKHRoaXMuaGFuZGxlU2Nyb2xsKTtcbiAgfTtcblxuICBzaG93SXRlbShpdGVtLCB3aW5Qb3MpIHtcbiAgICBjb25zdCBlbCA9IGl0ZW0uZWw7XG4gICAgY29uc3QgaW1nWSA9IHNjcm9sbEhlbHBlci5nZXRUb3BDb29yZChlbCk7XG4gICAgY29uc3QgaW1nSCA9IGVsLm9mZnNldEhlaWdodDtcblxuICAgIC8vIElmIGJsb2NrIGlzIHNob3duIG9uIHNjcmVlblxuICAgIGlmICh3aW5Qb3Mud2luQm90dG9tID4gaW1nWSAmJiB3aW5Qb3Mud2luWSA8IGltZ1kgKyBpbWdIKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgICAgfSwgaXRlbS5kZWxheSk7XG4gICAgICB0aGlzLml0ZW1zLnNwbGljZSh0aGlzLml0ZW1zLmluZGV4T2YoaXRlbSksIDEpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0ICcuLi9zdHlsZXMvbWFpbi5sZXNzJztcbmltcG9ydCAnLi4vc3R5bGVzL3NsaWRlci5sZXNzJztcbmltcG9ydCAnLi4vc3R5bGVzL3BhcmFsbGF4Lmxlc3MnO1xuaW1wb3J0ICcuLi9zdHlsZXMvbGF6eS5sZXNzJztcbmltcG9ydCAnLi4vc3R5bGVzL21vZGFsLmxlc3MnO1xuaW1wb3J0ICcuLi9zdHlsZXMvYmxvY2stMS5sZXNzJztcbmltcG9ydCAnLi4vc3R5bGVzL2Jsb2NrLTIubGVzcyc7XG5pbXBvcnQgJy4uL3N0eWxlcy9ibG9jay0zLmxlc3MnO1xuaW1wb3J0ICcuLi9zdHlsZXMvYmxvY2stNC5sZXNzJztcbmltcG9ydCAnLi4vc3R5bGVzL2Jsb2NrLTUubGVzcyc7XG5pbXBvcnQgJy4uL3N0eWxlcy9ibG9jay02Lmxlc3MnO1xuaW1wb3J0ICcuLi9zdHlsZXMvYmxvY2stNy5sZXNzJztcbmltcG9ydCAnLi4vc3R5bGVzL2Jsb2NrLTgubGVzcyc7XG5pbXBvcnQgJy4uL3N0eWxlcy9ibG9jay05Lmxlc3MnO1xuaW1wb3J0IHtMYXp5U2hvd2luZ30gZnJvbSBcIi4vbGF6eS1zaG93aW5nXCI7XG5pbXBvcnQge01vZGFsfSBmcm9tIFwiLi9tb2RhbFwiO1xuXG5pbXBvcnQge1NsaWRlcn0gZnJvbSBcIi4vc2xpZGVyXCI7XG5pbXBvcnQge1BhcmFsbGF4fSBmcm9tIFwiLi9wYXJhbGxheFwiO1xuaW1wb3J0IHtMYXp5TG9hZGluZ30gZnJvbSBcIi4vbGF6eS1sb2FkaW5nXCI7XG5cblxuY29uc3Qgc2xpZGVyMSA9IG5ldyBTbGlkZXIoJy5iMS1zbGlkZXInKTtcbmNvbnN0IHNsaWRlcjMgPSBuZXcgU2xpZGVyKCcuYjMtc2xpZGVyJyk7XG5jb25zdCBzbGlkZXI0ID0gbmV3IFNsaWRlcignLmI0LXNsaWRlcicpO1xuXG5uZXcgTGF6eUxvYWRpbmcoKTtcbm5ldyBQYXJhbGxheCgpO1xubmV3IE1vZGFsKCk7XG5uZXcgTGF6eVNob3dpbmcoKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=